# OpenAI API Configuration
OPENAI_API_KEY=sk-your-openai-api-key-here

# Lakera API Configuration
LAKERA_API_KEY=your-lakera-api-key-here

# Freshdesk API Configuration
FRESHDESK_DOMAIN=yourcompany.freshdesk.com
FRESHDESK_API_KEY=your-freshdesk-api-key-here

# ParkWhiz API Configuration (Legacy)
PARKWHIZ_API_KEY=your-parkwhiz-api-key-here

# ParkWhiz OAuth2 Configuration (for duplicate booking detection)
# Contact dev-admin@parkwhiz.com or partner-support@parkwhiz.com to obtain credentials
# Required for automated duplicate booking detection and refund processing
PARKWHIZ_CLIENT_ID=your-client-id-here
PARKWHIZ_CLIENT_SECRET=your-client-secret-here
PARKWHIZ_SCOPE=internal
PARKWHIZ_BASE_URL=https://api.parkwhiz.com/v4
PARKWHIZ_TIMEOUT=5
PARKWHIZ_MAX_RETRIES=3
PARKWHIZ_DUPLICATE_DETECTION_ENABLED=true

# Parlant Configuration
PARLANT_BASE_URL=http://parlant:8800

# ============================================================================
# Webhook Configuration
# ============================================================================
# These settings control the webhook endpoint that receives Freshdesk events
# for automated ticket processing.

# WEBHOOK_ENABLED: Enable or disable webhook processing (default: true)
# Set to false to disable webhook endpoint entirely
WEBHOOK_ENABLED=true

# WEBHOOK_SECRET: Secret key for webhook signature verification (REQUIRED if enabled)
# This must match the secret configured in Freshdesk webhook settings
# Generate a secure random string for production use
WEBHOOK_SECRET=your-freshdesk-webhook-secret-here

# WEBHOOK_PORT: Port number for webhook endpoint (default: 8801)
# Must be between 1 and 65535
# Ensure this port is exposed in docker-compose.yml
WEBHOOK_PORT=8801

# WEBHOOK_PATH: URL path for webhook endpoint (default: /webhook/freshdesk)
# Must start with /
# Full webhook URL will be: http://your-domain:8801/webhook/freshdesk
WEBHOOK_PATH=/webhook/freshdesk

# WEBHOOK_EVENTS: Comma-separated list of event types to process (default: ticket_created,ticket_updated)
# Supported events: ticket_created, ticket_updated, note_added
# Only events in this list will trigger automated processing
WEBHOOK_EVENTS=ticket_created,ticket_updated

# WEBHOOK_LOG_LEVEL: Logging level for webhook operations (default: INFO)
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
WEBHOOK_LOG_LEVEL=INFO

# WEBHOOK_RATE_LIMIT: Maximum requests per minute per IP (default: 100)
# Requests exceeding this limit will receive HTTP 429 response
WEBHOOK_RATE_LIMIT=100

# WEBHOOK_RATE_LIMIT_WINDOW: Time window for rate limiting in seconds (default: 60)
# Works with WEBHOOK_RATE_LIMIT to define requests per window
WEBHOOK_RATE_LIMIT_WINDOW=60

# WEBHOOK_DEDUPLICATION_WINDOW: Time window for event deduplication in seconds (default: 60)
# Duplicate events within this window will be ignored
WEBHOOK_DEDUPLICATION_WINDOW=60

# ============================================================================
# Performance Tuning Configuration
# ============================================================================
# These settings control connection pooling, caching, and other performance
# optimizations for high-volume webhook processing.

# CONNECTION_POOL_MAX_CONNECTIONS: Maximum total connections in pool (default: 100)
# Increase for higher throughput, decrease to reduce memory usage
CONNECTION_POOL_MAX_CONNECTIONS=100

# CONNECTION_POOL_MAX_KEEPALIVE: Maximum idle connections to keep (default: 20)
# Higher values improve performance but use more memory
CONNECTION_POOL_MAX_KEEPALIVE=20

# CONNECTION_POOL_KEEPALIVE_EXPIRY: Seconds to keep idle connections (default: 30.0)
# Balance between connection reuse and resource cleanup
CONNECTION_POOL_KEEPALIVE_EXPIRY=30.0

# CONNECTION_POOL_TIMEOUT: Default timeout for requests in seconds (default: 30.0)
# Adjust based on external API response times
CONNECTION_POOL_TIMEOUT=30.0

# CACHE_POLICY_TTL: Policy document cache TTL in seconds (default: 3600)
# Longer TTL reduces API calls but may serve stale data
CACHE_POLICY_TTL=3600

# CACHE_TICKET_TTL: Ticket data cache TTL in seconds (default: 300)
# Shorter TTL ensures fresher data for active tickets
CACHE_TICKET_TTL=300

# CACHE_CONFIG_TTL: Configuration cache TTL in seconds (default: 900)
# Balance between performance and configuration freshness
CACHE_CONFIG_TTL=900

# CACHE_BOOKING_TTL: Booking data cache TTL in seconds (default: 300)
# Adjust based on booking data update frequency
CACHE_BOOKING_TTL=300

# CACHE_MAX_SIZE_POLICY: Maximum policy cache entries (default: 100)
CACHE_MAX_SIZE_POLICY=100

# CACHE_MAX_SIZE_TICKET: Maximum ticket cache entries (default: 500)
CACHE_MAX_SIZE_TICKET=500

# CACHE_MAX_SIZE_CONFIG: Maximum config cache entries (default: 50)
CACHE_MAX_SIZE_CONFIG=50

# CACHE_MAX_SIZE_BOOKING: Maximum booking cache entries (default: 500)
CACHE_MAX_SIZE_BOOKING=500

# PostgreSQL Configuration
POSTGRES_DB=ranjayDB
POSTGRES_USER=ranjay.kumar
POSTGRES_PASSWORD=ranjay
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# Voice Bridge Tuning
TURN_TIMEOUT_SECS=30
POLL_WAIT_SECS=10
MAX_EMPTY_POLLS=3

# WebRTC ICE Servers (comma-separated)
# For testing with Google's public STUN server:
ICE_SERVERS=stun:stun.l.google.com:19302

# For production with TURN server (required for restrictive networks):
# ICE_SERVERS=stun:stun.l.google.com:19302,turn:username:password@your-turn-server.com:3478

# Test Data Configuration (for test_parkwhiz_booking.py)
TEST_BOOKING_ID=89406003
TEST_CUSTOMER_EMAIL=test@example.com